(function(){"use strict";var e={6667:function(e,t,r){var i=r(9242),s=r(3396);const n={class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"},a={key:1,class:"container"},c=(0,s._)("div",{class:"w-full my-4"},null,-1);function o(e,t,r,i,o,l){const u=(0,s.up)("ThePreloader"),d=(0,s.up)("TickerAdding"),h=(0,s.up)("TickersFilter"),m=(0,s.up)("TickersPagination"),p=(0,s.up)("TickersList"),k=(0,s.up)("TickerGraph");return(0,s.wg)(),(0,s.iD)("div",n,[o.haveCoinsNamesLoaded?((0,s.wg)(),(0,s.iD)("div",a,[c,(0,s.Wm)(d,{hasThisTicker:o.hasThisTicker,hasTickerAdded:o.hasTickerAdded,isCoinExisting:o.isCoinExisting,coinsNames:o.coinsNames,onNewTicker:l.addNewTicker,onInputTickerValueChanging:l.validateTicker},null,8,["hasThisTicker","hasTickerAdded","isCoinExisting","coinsNames","onNewTicker","onInputTickerValueChanging"]),(0,s._)("div",null,[(0,s.Wm)(h,{filterValue:o.filterValue,"onUpdate:filterValue":t[0]||(t[0]=e=>o.filterValue=e)},null,8,["filterValue"]),(0,s.Wm)(m,{currentPage:o.currentPage,hasNextPage:l.hasNextPage,onPrevPageRequested:t[1]||(t[1]=e=>o.currentPage--),onNextPageRequested:t[2]||(t[2]=e=>o.currentPage++)},null,8,["currentPage","hasNextPage"])]),o.tickers.length?((0,s.wg)(),(0,s.j4)(p,{key:0,tickers:l.finalTickers,activeTicker:o.activeTicker,onTickerSelected:l.activateTicker,onTickerRemovalRequested:l.removeTicker},null,8,["tickers","activeTicker","onTickerSelected","onTickerRemovalRequested"])):(0,s.kq)("",!0),o.activeTicker?((0,s.wg)(),(0,s.j4)(k,{key:1,allGraphValues:l.normalizedGraph,tickerName:o.activeTicker.name,onCloseGraph:t[3]||(t[3]=e=>o.activeTicker=null)},null,8,["allGraphValues","tickerName"])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.j4)(u,{key:0}))])}r(7658);const l={class:"fixed w-100 h-100 opacity-80 bg-purple-800 inset-0 z-50 flex items-center justify-center"},u=(0,s._)("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,s._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,s._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d=[u];function h(e,t,r,i,n,a){return(0,s.wg)(),(0,s.iD)("div",l,d)}var m={name:"ThePreloader"},p=r(89);const k=(0,p.Z)(m,[["render",h]]);var f=k,g=r(7139);const T={class:"flex"},v={class:"max-w-xs"},y=(0,s._)("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),_={class:"mt-1 relative rounded-md shadow-md"},b={key:0,class:"flex bg-white shadow-md p-1 rounded-md shadow-md flex-wrap"},w=["onClick"],E={key:1,class:"text-sm text-red-600"},R={key:2,class:"text-sm text-red-600"};function x(e,t,r,n,a,c){const o=(0,s.up)("add-button");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",T,[(0,s._)("div",v,[y,(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.inputTickerName=e),onKeydown:t[1]||(t[1]=(0,i.D2)((e=>c.addTicker()),["enter"])),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,544),[[i.nr,a.inputTickerName]])]),c.hints.length?((0,s.wg)(),(0,s.iD)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.hints,((e,t)=>((0,s.wg)(),(0,s.iD)("span",{key:t,onClick:t=>c.addTicker(e),class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer"},(0,g.zw)(e),9,w)))),128))])):(0,s.kq)("",!0),r.hasThisTicker?((0,s.wg)(),(0,s.iD)("div",E," Такой тикер уже добавлен ")):(0,s.kq)("",!0),!r.isCoinExisting&&c.trimmedInputTickerName?((0,s.wg)(),(0,s.iD)("div",R," Такого тикера не существует ")):(0,s.kq)("",!0)])]),(0,s.Wm)(o,{onClick:c.addTicker,class:"my-4"},null,8,["onClick"])])}const C=(0,s._)("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[(0,s._)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1);function S(e,t,r,i,n,a){return(0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("click")),type:"button",class:"inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},[C,(0,s.Uk)(" Добавить ")])}var N={emits:{clicked:null}};const A=(0,p.Z)(N,[["render",S]]);var P=A,V={components:{AddButton:P},emits:{"new-ticker":e=>"string"===typeof e,"input-ticker-value-changing":e=>"string"===typeof e},props:{hasThisTicker:{type:Boolean,required:!1,default:!1},isCoinExisting:{type:Boolean,required:!1,default:!1},hasTickerAdded:{type:Array,required:!1,default:()=>[!1]},coinsNames:{type:Array,required:!1,default:()=>[]}},data(){return{inputTickerName:""}},methods:{addTicker(e){e=e||this.trimmedInputTickerName,e&&this.$emit("new-ticker",e)}},computed:{hints(){let e=[];return this.inputTickerName&&(e=this.coinsNames.filter((e=>e.includes(this.trimmedInputTickerName.toUpperCase()))).slice(0,4)),e},trimmedInputTickerName(){return this.inputTickerName.trim()}},watch:{inputTickerName(){this.$emit("input-ticker-value-changing",this.trimmedInputTickerName)},hasTickerAdded(){this.hasTickerAdded[0]&&(this.inputTickerName="")}}};const O=(0,p.Z)(V,[["render",x]]);var U=O;const D={class:"relative"},G={class:"text-lg leading-6 font-medium text-gray-900 my-8"},I={class:"flex items-end border-gray-600 border-b border-l h-64",ref:"graph"},M={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},q=(0,s._)("g",null,[(0,s._)("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})],-1),L=[q];function B(e,t,r,i,n,a){return(0,s.wg)(),(0,s.iD)("section",D,[(0,s._)("h3",G,(0,g.zw)(r.tickerName)+" - USD ",1),(0,s._)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.visibleGraphValues,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,style:(0,g.j5)({height:`${e}%`}),class:"bg-purple-800 border w-10"},null,4)))),128))],512),(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>a.closeGraph&&a.closeGraph(...e)),type:"button",class:"absolute top-0 right-0"},[((0,s.wg)(),(0,s.iD)("svg",M,L))])])}var Y={emits:{"close-graph":null},props:{allGraphValues:{type:Array,required:!1,default:()=>[]},tickerName:{type:String,required:!1,default:""}},data(){return{maxGraphValuesCount:0}},computed:{allGraphValuesLength(){return this.allGraphValues.length},visibleGraphValues(){const e=this.allGraphValuesLength;let t=this.allGraphValuesLength-this.maxGraphValuesCount;return t<0&&(t=0),this.allGraphValues.slice(t,e)}},methods:{calculateMaxGraphValuesCount(){this.$refs.graph&&(this.maxGraphValuesCount=Math.floor(this.$refs.graph.clientWidth/38))},closeGraph(){this.$emit("close-graph")}},mounted(){window.addEventListener("resize",this.calculateMaxGraphValuesCount),this.calculateMaxGraphValuesCount()},beforeUnmount(){window.removeEventListener("resize",this.calculateMaxGraphValuesCount)}};const $=(0,p.Z)(Y,[["render",B]]);var F=$;const j=(0,s._)("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),H={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},z=(0,s._)("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1);function Z(e,t,r,i,n,a){const c=(0,s.up)("TickersListItem");return(0,s.wg)(),(0,s.iD)(s.HY,null,[j,(0,s._)("dl",H,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tickers,(t=>((0,s.wg)(),(0,s.j4)(c,{key:t.name,tickerName:t.name,tickerPrice:t.price,class:(0,g.C_)(["overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer",[t.isValid?"bg-white":"bg-red-100",{"border-4":r.activeTicker===t}]]),onSelected:r=>e.$emit("tickerSelected",t),onTickerRemovalRequested:r=>e.$emit("tickerRemovalRequested",t)},null,8,["tickerName","tickerPrice","class","onSelected","onTickerRemovalRequested"])))),128))]),z],64)}const K={class:"px-4 py-5 sm:p-6 text-center"},W={class:"text-sm font-medium text-gray-500 truncate"},J={class:"mt-1 text-3xl font-semibold text-gray-900"},Q=(0,s._)("div",{class:"w-full border-t border-gray-200"},null,-1);function X(e,t,r,i,n,a){const c=(0,s.up)("RemoveTickerButton");return(0,s.wg)(),(0,s.iD)("div",{onClick:t[1]||(t[1]=t=>e.$emit("selected"))},[(0,s._)("div",K,[(0,s._)("dt",W,(0,g.zw)(r.tickerName)+" - USD ",1),(0,s._)("dd",J,(0,g.zw)(a.formattedTickerPrice),1)]),Q,(0,s.Wm)(c,{onClicked:t[0]||(t[0]=t=>e.$emit("tickerRemovalRequested",r.tickerName))})])}const ee=(0,s._)("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1);function te(e,t,r,n,a,c){return(0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=(0,i.iM)((t=>e.$emit("clicked")),["stop"])),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-20 transition-all focus:outline-none"},[ee,(0,s.Uk)(" Удалить ")])}var re={name:"RemoveButton",emits:{clicked:null}};const ie=(0,p.Z)(re,[["render",te]]);var se=ie,ne={name:"TickersListItem",components:{RemoveTickerButton:se},emits:{tickerRemovalRequested:null,selected:null},props:{tickerName:{type:String,required:!0},tickerPrice:{type:Number,required:!1,default:NaN}},computed:{formattedTickerPrice(){return isNaN(this.tickerPrice)?"-":this.tickerPrice>1?this.tickerPrice.toFixed(2):this.tickerPrice.toPrecision(4)}}};const ae=(0,p.Z)(ne,[["render",X]]);var ce=ae,oe={name:"TickersList",components:{TickersListItem:ce},emits:{tickerSelected:null,tickerRemovalRequested:null},props:{tickers:{type:Array,required:!0},activeTicker:{type:Object,required:!1,default:null}}};const le=(0,p.Z)(oe,[["render",Z]]);var ue=le;const de=(0,s._)("label",{for:"filter",class:"block text-sm font-medium text-gray-700"}," Фильтр ",-1),he={class:"max-w-xs flex"},me={class:"mt-1 relative rounded-md shadow-md"},pe=["value"];function ke(e,t,r,i,n,a){return(0,s.wg)(),(0,s.iD)("div",null,[de,(0,s._)("div",he,[(0,s._)("div",me,[(0,s._)("input",{value:r.filterValue,onInput:t[0]||(t[0]=t=>e.$emit("update:filterValue",t.target.value)),type:"text",name:"filter",id:"filter",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md"},null,40,pe)])])])}var fe={name:"TickersFilter",emits:{"update:filterValue":null},props:{filterValue:{type:String,required:!0,default:""}}};const ge=(0,p.Z)(fe,[["render",ke]]);var Te=ge;function ve(e,t,r,i,n,a){return(0,s.wg)(),(0,s.iD)("div",null,[r.currentPage>1?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("prevPageRequested")),class:"m-1 my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Назад ")):(0,s.kq)("",!0),r.hasNextPage?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[1]||(t[1]=t=>e.$emit("nextPageRequested")),class:"m-1 my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Вперёд ")):(0,s.kq)("",!0)])}var ye={name:"TickersPagination",emits:{prevPageRequested:null,nextPageRequested:null},props:{hasNextPage:{type:Boolean,required:!0,default:!1},currentPage:{type:Number,reqired:!0,default:1}}};const _e=(0,p.Z)(ye,[["render",ve]]);var be=_e;const we="895ac081c2491c49bc49f73823830c8fc1d49d9e542ba8d9748a30c1c3108b7b",Ee=`wss://streamer.cryptocompare.com/v2?api_key=${we}`,Re={MESSAGE_TYPE_UPDATE:"5",INVALID_SUB_MESSAGE:"INVALID_SUB",INVALID_UNSUB_MESSAGE:"SUBSCRIPTION_UNRECOGNIZED",ALREADY_SUBSCRIBED_MESSAGE:"SUBSCRIPTION_ALREADY_ACTIVE",PARAMETER_SEPARATOR:"~"},xe={SOCKET_INIT:"SOCKET_INIT",SOCKET_MESSAGE:"SOCKET_MESSAGE"},Ce=new SharedWorker("sharedWorker.js"),Se={UPDATE:1,SUB_ERROR:2,UNSUB_ERROR:3};function Ne(e){Ce.port.postMessage({type:xe.SOCKET_MESSAGE,text:e})}function Ae(e){Ce.port.addEventListener("message",(t=>e(Pe(t.data))))}function Pe(e){const t={type:null,fromSymbol:null,toSymbol:null,price:null};if(e.TYPE===Re.MESSAGE_TYPE_UPDATE)t.type=Se.UPDATE,t.fromSymbol=e.FROMSYMBOL,t.toSymbol=e.TOSYMBOL,t.price=e.PRICE;else{switch(e.MESSAGE){case Re.INVALID_SUB_MESSAGE:t.type=Se.SUB_ERROR;break;case Re.INVALID_UNSUB_MESSAGE:t.type=Se.UNSUB_ERROR;break}if(e.PARAMETER){const r=e.PARAMETER.split(Re.PARAMETER_SEPARATOR).slice(2,4);t.fromSymbol=r[0],t.toSymbol=r[1]}}return t}function Ve(e,t){Ne({action:"SubAdd",subs:[`5~CCCAGG~${e}~${t}`]})}function Oe(e,t){Ne({action:"SubRemove",subs:[`5~CCCAGG~${e}~${t}`]})}function Ue(){return fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true").then((e=>e.json())).then((e=>{const t=[];for(let r in e.Data)t.push(r);return t}))}function De(){return JSON.parse(localStorage.getItem("tickers"))}function Ge(e){localStorage.setItem("tickers",JSON.stringify(e))}function Ie(e){window.addEventListener("storage",(()=>e(De())))}function Me(e){window.history.pushState(null,document.title,`${window.location.pathname}?filter=${e.filter}&page=${e.page}`)}function qe(){return Object.fromEntries(new URL(window.location).searchParams.entries())}Ce.port.start(),Ce.port.postMessage({type:xe.SOCKET_INIT,text:Ee});const Le={listenTickersMessages:Ae,addTickerToTracked:Ve,removeTickerFromTracked:Oe,tickersMessagesTypes:Se};class Be{constructor(){this._updatesHandlers=new Map,this._pricesOfReserveCurrencySubs=new Map,this._actualReserveInDefaultCurrencyCourse=null,this._constants={DEFAULT_CURRENCY_TO:"USD",RESERVE_CURRENCY_TO:"BTC",messagesTypes:Le.tickersMessagesTypes},Le.listenTickersMessages(this._tickersMessageHandler.bind(this)),Le.addTickerToTracked(this._constants.RESERVE_CURRENCY_TO,this._constants.DEFAULT_CURRENCY_TO)}subscribe(e,t){this._updatesHandlers.set(e,t),Le.addTickerToTracked(e,this._constants.DEFAULT_CURRENCY_TO)}unsubscribe(e,t){this._updatesHandlers.delete(e),this._pricesOfReserveCurrencySubs.has(e)&&this._pricesOfReserveCurrencySubs.delete(e),e!==this._constants.RESERVE_CURRENCY_TO&&t&&Le.removeTickerFromTracked(e,this._constants.DEFAULT_CURRENCY_TO)}_tickersMessageHandler(e){switch(e.type){case this._constants.messagesTypes.UPDATE:this._tickerUpdateHandler(e);break;case this._constants.messagesTypes.SUB_ERROR:this._failedAttemptOfSubscribtionHandler(e);break;case this._constants.messagesTypes.UNSUB_ERROR:this._failedAttemptOfUnsubscribtionHandler(e);break}}_tickerUpdateHandler(e){const{fromSymbol:t,toSymbol:r}=e;let{price:i}=e;i&&(t===this._constants.RESERVE_CURRENCY_TO&&r===this._constants.DEFAULT_CURRENCY_TO&&(this._actualReserveInDefaultCurrencyCourse=i,this._updateReserveCurrencySubs()),r===this._constants.RESERVE_CURRENCY_TO&&(this._pricesOfReserveCurrencySubs.set(t,i),i=this._fromReserveToDefault(i)),this._notifySubscriber(t,i,!0))}_notifySubscriber(e,t,r){const i=this._updatesHandlers.get(e);i&&i({newPrice:t,isValid:r})}_updateReserveCurrencySubs(){this._pricesOfReserveCurrencySubs.forEach(((e,t)=>this._notifySubscriber(t,this._fromReserveToDefault(e),!0)))}_fromReserveToDefault(e){return e*this._actualReserveInDefaultCurrencyCourse}_failedAttemptOfSubscribtionHandler(e){const{fromSymbol:t,toSymbol:r}=e;r===this._constants.DEFAULT_CURRENCY_TO?Le.addTickerToTracked(t,this._constants.RESERVE_CURRENCY_TO):this._notifySubscriber(t,null,!1)}_failedAttemptOfUnsubscribtionHandler(e){const{fromSymbol:t,toSymbol:r}=e;r!==this._constants.RESERVE_CURRENCY_TO?Le.removeTickerFromTracked(t,this._constants.RESERVE_CURRENCY_TO):console.warn(`If ticker ${t} wasn't deleted by UI, this warning \nshould be admitted as error. It's possible the ticker was subscribed to \nunsupposed currency or it hasn't been subscribed at all.`)}}var Ye=new Be;class $e{constructor(e,t,r){this._name=e,this._price=t,this._isValid=r}get name(){return this._name}get price(){return this._price}set price(e){this._price=e}get isValid(){return this._isValid}set isValid(e){this._isValid=e}}var Fe=$e;function je(e,t){return e.filter((e=>e.name.includes(t.toUpperCase())))}const He={getCoinsNames:Ue,subscribeToTickersUpdate:Ie,getTickers:De,setTickers:Ge,setTickersViewOptions:Me,getTickersVeiwOptions:qe},ze={filterTickers:je};var Ze={name:"App",components:{TickerAdding:U,TickerGraph:F,TickersList:ue,ThePreloader:f,TickersFilter:Te,TickersPagination:be},data(){return{tickers:[],activeTicker:null,coinsNames:[],filterValue:"",currentPage:1,haveCoinsNamesLoaded:!1,hasThisTicker:!1,isCoinExisting:!1,hasTickerAdded:[!1],pricesForGraph:[],newValueForGraph:0}},computed:{firstPaginatedTikerIndex(){return 6*(this.currentPage-1)},lastPaginatedTikerIndex(){return 6*this.currentPage},filteredTickers(){return ze.filterTickers(this.tickers,this.filterValue)},finalTickers(){return this.filteredTickers.slice(this.firstPaginatedTikerIndex,this.lastPaginatedTikerIndex)},hasNextPage(){return this.filteredTickers.length>this.lastPaginatedTikerIndex},normalizedGraph(){const e=Math.min(...this.pricesForGraph),t=Math.max(...this.pricesForGraph);return t===e?this.pricesForGraph.map((()=>50)):this.pricesForGraph.map((r=>r===e?2:(r-e)/(t-e)*100))},tickersViewOptions(){return{filter:this.filterValue,page:this.currentPage}}},methods:{addNewTicker(e){if(this.validateTicker(e),this.hasThisTicker||!this.isCoinExisting)return void(this.hasTickerAdded=[!1]);const t=new Fe(e.toUpperCase(),NaN,!0);this.tickers=[...this.tickers,t],Ye.subscribe(t.name,(e=>{const{newPrice:r,isValid:i}=e;this.updateTicker(t.name,r||NaN,i)})),this.filterValue="",this.hasTickerAdded=[!0]},findTicker(e){return this.tickers.find((t=>t.name===e))},checkCoinExists(e){this.isCoinExisting=this.coinsNames.includes(e)},checkTickerAlreadyInTickers(e){this.hasThisTicker=Boolean(this.findTicker(e))},validateTicker(e){const t=e.toUpperCase();this.checkTickerAlreadyInTickers(t),this.checkCoinExists(t)},activateTicker(e){this.activeTicker=e},updateTicker(e,t,r){const i=this.findTicker(e);i.price=t,i.isValid=r},removeTicker(e){this.activeTicker===e&&(this.activeTicker=null),Ye.unsubscribe(e.name,e.isValid),this.tickers=this.tickers.filter((t=>t!==e))},updateTickers(e){e.forEach((e=>{this.findTicker(e)||this.addNewTicker(e)})),this.tickers.forEach((t=>{e.find((e=>e===t.name))||this.removeTicker(t)}))}},created(){He.subscribeToTickersUpdate(this.updateTickers),He.getCoinsNames().then((e=>{this.coinsNames=e,this.haveCoinsNamesLoaded=!0;const t=He.getTickers();t&&t.forEach((e=>this.addNewTicker(e)));const r=He.getTickersVeiwOptions();r.filter&&(this.filterValue=r.filter),r.page&&(this.currentPage=+r.page)}))},watch:{activeTicker:{handler(e,t){t!==e?this.pricesForGraph=[]:this.pricesForGraph.push(this.activeTicker.price)},deep:!0},tickers(e){He.setTickers(e.map((e=>e.name)))},finalTickers(){0===this.finalTickers.length&&this.currentPage>1&&(this.currentPage-=1)},tickersViewOptions(e){He.setTickersViewOptions(e)},filterValue(){this.currentPage=1}}};const Ke=(0,p.Z)(Ze,[["render",o]]);var We=Ke;(0,i.ri)(We).mount("#app")}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,i,s,n){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],s=e[u][1],n=e[u][2];for(var c=!0,o=0;o<i.length;o++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](i[o])}))?i.splice(o--,1):(c=!1,n<a&&(a=n));if(c){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,a=i[0],c=i[1],o=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(o)var u=o(r)}for(t&&t(i);l<a.length;l++)n=a[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},i=self["webpackChunkcryptonomicon"]=self["webpackChunkcryptonomicon"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(6667)}));i=r.O(i)})();
//# sourceMappingURL=app.6756ec01.js.map